import{c as Ie,d as It,a as pe,h as me,j as _,R,r as de,u as Ce,e as Ut,f as Pt,i as Wt,k as Bt,l as bt,m as zt,n as qe,o as qt,p as Ht}from"./index-CTzCtog2.js";import{T as Y,c as ct,B as He,l as pt,I as wt}from"./Button-DnX41o4c.js";const Yt="_h2_1awyl_1",Gt="_h3_1awyl_10",Zt="_h4_1awyl_19",Kt="_body_1awyl_28",Qt="_container_1awyl_37",Jt="_days_1awyl_42",Xt="_dates_1awyl_46",es="_date_1awyl_46",ts="_passive_1awyl_62",ss="_active_1awyl_65",rs="_events_1awyl_68",ie={h2:Yt,h3:Gt,h4:Zt,body:Kt,container:Qt,days:Jt,dates:Xt,date:es,passive:ts,active:ss,events:rs},is=e=>{const r=new Date(e),t=r.getFullYear(),i=r.getMonth(),l=new Date(t,i,1),n=new Date(t,i+1,0),h=new Date(t,i,l.getDay()===0?-5:l.getDay()===1?1:2-l.getDay()),u=new Date(t,i+1,n.getDay()?7-n.getDay():0),v=new Date(t,i,0);return{firstMondayDateObject:h,firstDateObject:l,currentDateObject:r,lastDateObject:n,lastSundayDateObject:u,lastDateForPreviousMonth:v}},as=e=>{const{firstMondayDateObject:r,firstDateObject:t,currentDateObject:i,lastDateObject:l,lastSundayDateObject:n,lastDateForPreviousMonth:h}=is(e),u=[];if(r.getMonth()!==t.getMonth())for(let v=r.getDate();v<=h.getDate();++v){const b=r.getFullYear(),x=r.getMonth(),m=v;u.push({dateId:Ie(b,x,m),date:v,status:"passive"})}for(let v=1;v<=l.getDate();++v){const b=i.getFullYear(),x=i.getMonth(),m=v;u.push({dateId:Ie(b,x,m),date:v,status:"active"})}if(l.getMonth()!==n.getMonth())for(let v=1;v<=n.getDate();++v){const b=n.getFullYear(),x=n.getMonth(),m=v;u.push({dateId:Ie(b,x,m),date:v,status:"passive"})}return u},ns=(e,r)=>{const t=It({startDateId:e,endDateId:r});return{data:t.data,isLoading:t.isLoading,isSuccess:t.isSuccess}},os=()=>{const e=pe(u=>u.calendar.dateId),r=as(e),t=r[0].dateId,i=r[r.length-1].dateId,{data:l}=ns(t,i),n=l==null?void 0:l.data,h=r.map(u=>{const v=n==null?void 0:n.filter(x=>me(u).isBetween(me(x.dateStart),me(x.dateEnd),"days","[]")||me(u).isSame(x.dateStart,"day")||me(u).isSame(x.dateEnd,"day")),b={...u};return b.events=v,b});return _.jsxs("article",{className:ie.container,children:[_.jsx("div",{className:ie.days,children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(u=>_.jsx("div",{className:ie.day,children:_.jsx(Y,{styleName:"h3",children:u})},u))}),_.jsx("div",{className:ie.dates,children:h.map(u=>_.jsxs("div",{className:ie.date,children:[_.jsx(Y,{styleName:"body",className:ie[u.status],children:u.date}),_.jsx("div",{className:ie.events})]},u.dateId))})]})},ls="_h2_1ed39_1",cs="_h3_1ed39_10",us="_h4_1ed39_19",ds="_body_1ed39_28",fs="_loginContainer_1ed39_37",hs="_registrationContainer_1ed39_44",ys="_title_1ed39_51",_s="_titleContainer_1ed39_58",ms="_noticeTextContainer_1ed39_64",gs="_noticeText_1ed39_64",ae={h2:ls,h3:cs,h4:us,body:ds,loginContainer:fs,registrationContainer:hs,title:ys,titleContainer:_s,noticeTextContainer:ms,noticeText:gs};var we=e=>e.type==="checkbox",fe=e=>e instanceof Date,M=e=>e==null;const Ft=e=>typeof e=="object";var k=e=>!M(e)&&!Array.isArray(e)&&Ft(e)&&!fe(e),vs=e=>k(e)&&e.target?we(e.target)?e.target.checked:e.target.value:e,xs=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,bs=(e,r)=>e.has(xs(r)),ps=e=>{const r=e.constructor&&e.constructor.prototype;return k(r)&&r.hasOwnProperty("isPrototypeOf")},Ye=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function W(e){let r;const t=Array.isArray(e);if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Ye&&(e instanceof Blob||e instanceof FileList))&&(t||k(e)))if(r=t?[]:{},!t&&!ps(e))r=e;else for(const i in e)e.hasOwnProperty(i)&&(r[i]=W(e[i]));else return e;return r}var Me=e=>Array.isArray(e)?e.filter(Boolean):[],A=e=>e===void 0,y=(e,r,t)=>{if(!r||!k(e))return t;const i=Me(r.split(/[,[\].]+?/)).reduce((l,n)=>M(l)?l:l[n],e);return A(i)||i===e?A(e[r])?t:e[r]:i},te=e=>typeof e=="boolean",Ge=e=>/^\w*$/.test(e),Vt=e=>Me(e.replace(/["|']|\]/g,"").split(/\.|\[/)),D=(e,r,t)=>{let i=-1;const l=Ge(r)?[r]:Vt(r),n=l.length,h=n-1;for(;++i<n;){const u=l[i];let v=t;if(i!==h){const b=e[u];v=k(b)||Array.isArray(b)?b:isNaN(+l[i+1])?{}:[]}if(u==="__proto__")return;e[u]=v,e=e[u]}return e};const ut={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},H={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ws=R.createContext(null),Fs=()=>R.useContext(ws);var Vs=(e,r,t,i=!0)=>{const l={defaultValues:r._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const h=n;return r._proxyFormState[h]!==H.all&&(r._proxyFormState[h]=!i||H.all),e[h]}});return l},$=e=>k(e)&&!Object.keys(e).length,Ds=(e,r,t,i)=>{t(e);const{name:l,...n}=e;return $(n)||Object.keys(n).length>=Object.keys(r).length||Object.keys(n).find(h=>r[h]===H.all)},je=e=>Array.isArray(e)?e:[e];function As(e){const r=R.useRef(e);r.current=e,R.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}var G=e=>typeof e=="string",js=(e,r,t,i,l)=>G(e)?(i&&r.watch.add(e),y(t,e,l)):Array.isArray(e)?e.map(n=>(i&&r.watch.add(n),y(t,n))):(i&&(r.watchAll=!0),t),Es=(e,r,t,i,l)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:l||!0}}:{},dt=e=>({isOnSubmit:!e||e===H.onSubmit,isOnBlur:e===H.onBlur,isOnChange:e===H.onChange,isOnAll:e===H.all,isOnTouch:e===H.onTouched}),ft=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ve=(e,r,t,i)=>{for(const l of t||Object.keys(e)){const n=y(e,l);if(n){const{_f:h,...u}=n;if(h){if(h.refs&&h.refs[0]&&r(h.refs[0],l)&&!i)break;if(h.ref&&r(h.ref,h.name)&&!i)break;ve(u,r)}else k(u)&&ve(u,r)}}};var Ns=(e,r,t)=>{const i=je(y(e,t));return D(i,"root",r[t]),D(e,t,i),e},Ze=e=>e.type==="file",se=e=>typeof e=="function",Ne=e=>{if(!Ye)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},Ee=e=>G(e),Ke=e=>e.type==="radio",Se=e=>e instanceof RegExp;const ht={value:!1,isValid:!1},yt={value:!0,isValid:!0};var Dt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!A(e[0].attributes.value)?A(e[0].value)||e[0].value===""?yt:{value:e[0].value,isValid:!0}:yt:ht}return ht};const _t={isValid:!1,value:null};var At=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,_t):_t;function mt(e,r,t="validate"){if(Ee(e)||Array.isArray(e)&&e.every(Ee)||te(e)&&!e)return{type:t,message:Ee(e)?e:"",ref:r}}var ue=e=>k(e)&&!Se(e)?e:{value:e,message:""},gt=async(e,r,t,i,l)=>{const{ref:n,refs:h,required:u,maxLength:v,minLength:b,min:x,max:m,pattern:O,validate:I,name:E,valueAsNumber:J,mount:B,disabled:z}=e._f,w=y(r,E);if(!B||z)return{};const Z=h?h[0]:n,K=p=>{i&&Z.reportValidity&&(Z.setCustomValidity(te(p)?"":p||""),Z.reportValidity())},N={},oe=Ke(n),Fe=we(n),re=oe||Fe,le=(J||Ze(n))&&A(n.value)&&A(w)||Ne(n)&&n.value===""||w===""||Array.isArray(w)&&!w.length,U=Es.bind(null,E,t,N),Ve=(p,F,S,C=Q.maxLength,q=Q.minLength)=>{const P=p?F:S;N[E]={type:p?C:q,message:P,ref:n,...U(p?C:q,P)}};if(l?!Array.isArray(w)||!w.length:u&&(!re&&(le||M(w))||te(w)&&!w||Fe&&!Dt(h).isValid||oe&&!At(h).isValid)){const{value:p,message:F}=Ee(u)?{value:!!u,message:u}:ue(u);if(p&&(N[E]={type:Q.required,message:F,ref:Z,...U(Q.required,F)},!t))return K(F),N}if(!le&&(!M(x)||!M(m))){let p,F;const S=ue(m),C=ue(x);if(!M(w)&&!isNaN(w)){const q=n.valueAsNumber||w&&+w;M(S.value)||(p=q>S.value),M(C.value)||(F=q<C.value)}else{const q=n.valueAsDate||new Date(w),P=_e=>new Date(new Date().toDateString()+" "+_e),he=n.type=="time",ye=n.type=="week";G(S.value)&&w&&(p=he?P(w)>P(S.value):ye?w>S.value:q>new Date(S.value)),G(C.value)&&w&&(F=he?P(w)<P(C.value):ye?w<C.value:q<new Date(C.value))}if((p||F)&&(Ve(!!p,S.message,C.message,Q.max,Q.min),!t))return K(N[E].message),N}if((v||b)&&!le&&(G(w)||l&&Array.isArray(w))){const p=ue(v),F=ue(b),S=!M(p.value)&&w.length>+p.value,C=!M(F.value)&&w.length<+F.value;if((S||C)&&(Ve(S,p.message,F.message),!t))return K(N[E].message),N}if(O&&!le&&G(w)){const{value:p,message:F}=ue(O);if(Se(p)&&!w.match(p)&&(N[E]={type:Q.pattern,message:F,ref:n,...U(Q.pattern,F)},!t))return K(F),N}if(I){if(se(I)){const p=await I(w,r),F=mt(p,Z);if(F&&(N[E]={...F,...U(Q.validate,F.message)},!t))return K(F.message),N}else if(k(I)){let p={};for(const F in I){if(!$(p)&&!t)break;const S=mt(await I[F](w,r),Z,F);S&&(p={...S,...U(F,S.message)},K(S.message),t&&(N[E]=p))}if(!$(p)&&(N[E]={ref:Z,...p},!t))return N}}return K(!0),N};function Ss(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=A(e)?i++:e[r[i++]];return e}function Ts(e){for(const r in e)if(e.hasOwnProperty(r)&&!A(e[r]))return!1;return!0}function T(e,r){const t=Array.isArray(r)?r:Ge(r)?[r]:Vt(r),i=t.length===1?e:Ss(e,t),l=t.length-1,n=t[l];return i&&delete i[n],l!==0&&(k(i)&&$(i)||Array.isArray(i)&&Ts(i))&&T(e,t.slice(0,-1)),e}var Ue=()=>{let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}},Te=e=>M(e)||!Ft(e);function ne(e,r){if(Te(e)||Te(r))return e===r;if(fe(e)&&fe(r))return e.getTime()===r.getTime();const t=Object.keys(e),i=Object.keys(r);if(t.length!==i.length)return!1;for(const l of t){const n=e[l];if(!i.includes(l))return!1;if(l!=="ref"){const h=r[l];if(fe(n)&&fe(h)||k(n)&&k(h)||Array.isArray(n)&&Array.isArray(h)?!ne(n,h):n!==h)return!1}}return!0}var jt=e=>e.type==="select-multiple",ks=e=>Ke(e)||we(e),Pe=e=>Ne(e)&&e.isConnected,Et=e=>{for(const r in e)if(se(e[r]))return!0;return!1};function ke(e,r={}){const t=Array.isArray(e);if(k(e)||t)for(const i in e)Array.isArray(e[i])||k(e[i])&&!Et(e[i])?(r[i]=Array.isArray(e[i])?[]:{},ke(e[i],r[i])):M(e[i])||(r[i]=!0);return r}function Nt(e,r,t){const i=Array.isArray(e);if(k(e)||i)for(const l in e)Array.isArray(e[l])||k(e[l])&&!Et(e[l])?A(r)||Te(t[l])?t[l]=Array.isArray(e[l])?ke(e[l],[]):{...ke(e[l])}:Nt(e[l],M(r)?{}:r[l],t[l]):t[l]=!ne(e[l],r[l]);return t}var De=(e,r)=>Nt(e,r,ke(r)),St=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>A(e)?e:r?e===""?NaN:e&&+e:t&&G(e)?new Date(e):i?i(e):e;function We(e){const r=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):r.disabled))return Ze(r)?r.files:Ke(r)?At(e.refs).value:jt(r)?[...r.selectedOptions].map(({value:t})=>t):we(r)?Dt(e.refs).value:St(A(r.value)?e.ref.value:r.value,e)}var Cs=(e,r,t,i)=>{const l={};for(const n of e){const h=y(r,n);h&&D(l,n,h._f)}return{criteriaMode:t,names:[...e],fields:l,shouldUseNativeValidation:i}},ge=e=>A(e)?e:Se(e)?e.source:k(e)?Se(e.value)?e.value.source:e.value:e,Ms=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function vt(e,r,t){const i=y(e,t);if(i||Ge(t))return{error:i,name:t};const l=t.split(".");for(;l.length;){const n=l.join("."),h=y(r,n),u=y(e,n);if(h&&!Array.isArray(h)&&t!==n)return{name:t};if(u&&u.type)return{name:n,error:u};l.pop()}return{name:t}}var $s=(e,r,t,i,l)=>l.isOnAll?!1:!t&&l.isOnTouch?!(r||e):(t?i.isOnBlur:l.isOnBlur)?!e:(t?i.isOnChange:l.isOnChange)?e:!0,Os=(e,r)=>!Me(y(e,r)).length&&T(e,r);const Ls={mode:H.onSubmit,reValidateMode:H.onChange,shouldFocusError:!0};function Rs(e={}){let r={...Ls,...e},t={submitCount:0,isDirty:!1,isLoading:se(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},l=k(r.defaultValues)||k(r.values)?W(r.defaultValues||r.values)||{}:{},n=r.shouldUnregister?{}:W(l),h={action:!1,mount:!1,watch:!1},u={mount:new Set,unMount:new Set,array:new Set,watch:new Set},v,b=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:Ue(),array:Ue(),state:Ue()},O=dt(r.mode),I=dt(r.reValidateMode),E=r.criteriaMode===H.all,J=s=>a=>{clearTimeout(b),b=setTimeout(s,a)},B=async s=>{if(x.isValid||s){const a=r.resolver?$((await re()).errors):await U(i,!0);a!==t.isValid&&m.state.next({isValid:a})}},z=(s,a)=>{(x.isValidating||x.validatingFields)&&((s||Array.from(u.mount)).forEach(o=>{o&&(a?D(t.validatingFields,o,a):T(t.validatingFields,o))}),m.state.next({validatingFields:t.validatingFields,isValidating:!$(t.validatingFields)}))},w=(s,a=[],o,f,d=!0,c=!0)=>{if(f&&o){if(h.action=!0,c&&Array.isArray(y(i,s))){const g=o(y(i,s),f.argA,f.argB);d&&D(i,s,g)}if(c&&Array.isArray(y(t.errors,s))){const g=o(y(t.errors,s),f.argA,f.argB);d&&D(t.errors,s,g),Os(t.errors,s)}if(x.touchedFields&&c&&Array.isArray(y(t.touchedFields,s))){const g=o(y(t.touchedFields,s),f.argA,f.argB);d&&D(t.touchedFields,s,g)}x.dirtyFields&&(t.dirtyFields=De(l,n)),m.state.next({name:s,isDirty:p(s,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else D(n,s,a)},Z=(s,a)=>{D(t.errors,s,a),m.state.next({errors:t.errors})},K=s=>{t.errors=s,m.state.next({errors:t.errors,isValid:!1})},N=(s,a,o,f)=>{const d=y(i,s);if(d){const c=y(n,s,A(o)?y(l,s):o);A(c)||f&&f.defaultChecked||a?D(n,s,a?c:We(d._f)):C(s,c),h.mount&&B()}},oe=(s,a,o,f,d)=>{let c=!1,g=!1;const V={name:s},j=!!(y(i,s)&&y(i,s)._f&&y(i,s)._f.disabled);if(!o||f){x.isDirty&&(g=t.isDirty,t.isDirty=V.isDirty=p(),c=g!==V.isDirty);const L=j||ne(y(l,s),a);g=!!(!j&&y(t.dirtyFields,s)),L||j?T(t.dirtyFields,s):D(t.dirtyFields,s,!0),V.dirtyFields=t.dirtyFields,c=c||x.dirtyFields&&g!==!L}if(o){const L=y(t.touchedFields,s);L||(D(t.touchedFields,s,o),V.touchedFields=t.touchedFields,c=c||x.touchedFields&&L!==o)}return c&&d&&m.state.next(V),c?V:{}},Fe=(s,a,o,f)=>{const d=y(t.errors,s),c=x.isValid&&te(a)&&t.isValid!==a;if(e.delayError&&o?(v=J(()=>Z(s,o)),v(e.delayError)):(clearTimeout(b),v=null,o?D(t.errors,s,o):T(t.errors,s)),(o?!ne(d,o):d)||!$(f)||c){const g={...f,...c&&te(a)?{isValid:a}:{},errors:t.errors,name:s};t={...t,...g},m.state.next(g)}},re=async s=>{z(s,!0);const a=await r.resolver(n,r.context,Cs(s||u.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return z(s),a},le=async s=>{const{errors:a}=await re(s);if(s)for(const o of s){const f=y(a,o);f?D(t.errors,o,f):T(t.errors,o)}else t.errors=a;return a},U=async(s,a,o={valid:!0})=>{for(const f in s){const d=s[f];if(d){const{_f:c,...g}=d;if(c){const V=u.array.has(c.name);z([f],!0);const j=await gt(d,n,E,r.shouldUseNativeValidation&&!a,V);if(z([f]),j[c.name]&&(o.valid=!1,a))break;!a&&(y(j,c.name)?V?Ns(t.errors,j,c.name):D(t.errors,c.name,j[c.name]):T(t.errors,c.name))}!$(g)&&await U(g,a,o)}}return o.valid},Ve=()=>{for(const s of u.unMount){const a=y(i,s);a&&(a._f.refs?a._f.refs.every(o=>!Pe(o)):!Pe(a._f.ref))&&$e(s)}u.unMount=new Set},p=(s,a)=>(s&&a&&D(n,s,a),!ne(Xe(),l)),F=(s,a,o)=>js(s,u,{...h.mount?n:A(a)?l:G(s)?{[s]:a}:a},o,a),S=s=>Me(y(h.mount?n:l,s,e.shouldUnregister?y(l,s,[]):[])),C=(s,a,o={})=>{const f=y(i,s);let d=a;if(f){const c=f._f;c&&(!c.disabled&&D(n,s,St(a,c)),d=Ne(c.ref)&&M(a)?"":a,jt(c.ref)?[...c.ref.options].forEach(g=>g.selected=d.includes(g.value)):c.refs?we(c.ref)?c.refs.length>1?c.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(d)?!!d.find(V=>V===g.value):d===g.value)):c.refs[0]&&(c.refs[0].checked=!!d):c.refs.forEach(g=>g.checked=g.value===d):Ze(c.ref)?c.ref.value="":(c.ref.value=d,c.ref.type||m.values.next({name:s,values:{...n}})))}(o.shouldDirty||o.shouldTouch)&&oe(s,d,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&_e(s)},q=(s,a,o)=>{for(const f in a){const d=a[f],c=`${s}.${f}`,g=y(i,c);(u.array.has(s)||!Te(d)||g&&!g._f)&&!fe(d)?q(c,d,o):C(c,d,o)}},P=(s,a,o={})=>{const f=y(i,s),d=u.array.has(s),c=W(a);D(n,s,c),d?(m.array.next({name:s,values:{...n}}),(x.isDirty||x.dirtyFields)&&o.shouldDirty&&m.state.next({name:s,dirtyFields:De(l,n),isDirty:p(s,c)})):f&&!f._f&&!M(c)?q(s,c,o):C(s,c,o),ft(s,u)&&m.state.next({...t}),m.values.next({name:h.mount?s:void 0,values:{...n}})},he=async s=>{h.mount=!0;const a=s.target;let o=a.name,f=!0;const d=y(i,o),c=()=>a.type?We(d._f):vs(s),g=V=>{f=Number.isNaN(V)||V===y(n,o,V)};if(d){let V,j;const L=c(),ce=s.type===ut.BLUR||s.type===ut.FOCUS_OUT,Ot=!Ms(d._f)&&!r.resolver&&!y(t.errors,o)&&!d._f.deps||$s(ce,y(t.touchedFields,o),t.isSubmitted,I,O),Le=ft(o,u,ce);D(n,o,L),ce?(d._f.onBlur&&d._f.onBlur(s),v&&v(0)):d._f.onChange&&d._f.onChange(s);const Re=oe(o,L,ce,!1),Lt=!$(Re)||Le;if(!ce&&m.values.next({name:o,type:s.type,values:{...n}}),Ot)return x.isValid&&B(),Lt&&m.state.next({name:o,...Le?{}:Re});if(!ce&&Le&&m.state.next({...t}),r.resolver){const{errors:ot}=await re([o]);if(g(L),f){const Rt=vt(t.errors,i,o),lt=vt(ot,i,Rt.name||o);V=lt.error,o=lt.name,j=$(ot)}}else z([o],!0),V=(await gt(d,n,E,r.shouldUseNativeValidation))[o],z([o]),g(L),f&&(V?j=!1:x.isValid&&(j=await U(i,!0)));f&&(d._f.deps&&_e(d._f.deps),Fe(o,j,V,Re))}},ye=(s,a)=>{if(y(t.errors,a)&&s.focus)return s.focus(),1},_e=async(s,a={})=>{let o,f;const d=je(s);if(r.resolver){const c=await le(A(s)?s:d);o=$(c),f=s?!d.some(g=>y(c,g)):o}else s?(f=(await Promise.all(d.map(async c=>{const g=y(i,c);return await U(g&&g._f?{[c]:g}:g)}))).every(Boolean),!(!f&&!t.isValid)&&B()):f=o=await U(i);return m.state.next({...!G(s)||x.isValid&&o!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:o}:{},errors:t.errors}),a.shouldFocus&&!f&&ve(i,ye,s?d:u.mount),f},Xe=s=>{const a={...h.mount?n:l};return A(s)?a:G(s)?y(a,s):s.map(o=>y(a,o))},et=(s,a)=>({invalid:!!y((a||t).errors,s),isDirty:!!y((a||t).dirtyFields,s),error:y((a||t).errors,s),isValidating:!!y(t.validatingFields,s),isTouched:!!y((a||t).touchedFields,s)}),kt=s=>{s&&je(s).forEach(a=>T(t.errors,a)),m.state.next({errors:s?t.errors:{}})},tt=(s,a,o)=>{const f=(y(i,s,{_f:{}})._f||{}).ref,d=y(t.errors,s)||{},{ref:c,message:g,type:V,...j}=d;D(t.errors,s,{...j,...a,ref:f}),m.state.next({name:s,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&f&&f.focus&&f.focus()},Ct=(s,a)=>se(s)?m.values.subscribe({next:o=>s(F(void 0,a),o)}):F(s,a,!0),$e=(s,a={})=>{for(const o of s?je(s):u.mount)u.mount.delete(o),u.array.delete(o),a.keepValue||(T(i,o),T(n,o)),!a.keepError&&T(t.errors,o),!a.keepDirty&&T(t.dirtyFields,o),!a.keepTouched&&T(t.touchedFields,o),!a.keepIsValidating&&T(t.validatingFields,o),!r.shouldUnregister&&!a.keepDefaultValue&&T(l,o);m.values.next({values:{...n}}),m.state.next({...t,...a.keepDirty?{isDirty:p()}:{}}),!a.keepIsValid&&B()},st=({disabled:s,name:a,field:o,fields:f,value:d})=>{if(te(s)&&h.mount||s){const c=s?void 0:A(d)?We(o?o._f:y(f,a)._f):d;D(n,a,c),oe(a,c,!1,!1,!0)}},Oe=(s,a={})=>{let o=y(i,s);const f=te(a.disabled);return D(i,s,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:s}},name:s,mount:!0,...a}}),u.mount.add(s),o?st({field:o,disabled:a.disabled,name:s,value:a.value}):N(s,!0,a.value),{...f?{disabled:a.disabled}:{},...r.progressive?{required:!!a.required,min:ge(a.min),max:ge(a.max),minLength:ge(a.minLength),maxLength:ge(a.maxLength),pattern:ge(a.pattern)}:{},name:s,onChange:he,onBlur:he,ref:d=>{if(d){Oe(s,a),o=y(i,s);const c=A(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,g=ks(c),V=o._f.refs||[];if(g?V.find(j=>j===c):c===o._f.ref)return;D(i,s,{_f:{...o._f,...g?{refs:[...V.filter(Pe),c,...Array.isArray(y(l,s))?[{}]:[]],ref:{type:c.type,name:s}}:{ref:c}}}),N(s,!1,void 0,c)}else o=y(i,s,{}),o._f&&(o._f.mount=!1),(r.shouldUnregister||a.shouldUnregister)&&!(bs(u.array,s)&&h.action)&&u.unMount.add(s)}}},rt=()=>r.shouldFocusError&&ve(i,ye,u.mount),Mt=s=>{te(s)&&(m.state.next({disabled:s}),ve(i,(a,o)=>{const f=y(i,o);f&&(a.disabled=f._f.disabled||s,Array.isArray(f._f.refs)&&f._f.refs.forEach(d=>{d.disabled=f._f.disabled||s}))},0,!1))},it=(s,a)=>async o=>{let f;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let d=W(n);if(m.state.next({isSubmitting:!0}),r.resolver){const{errors:c,values:g}=await re();t.errors=c,d=g}else await U(i);if(T(t.errors,"root"),$(t.errors)){m.state.next({errors:{}});try{await s(d,o)}catch(c){f=c}}else a&&await a({...t.errors},o),rt(),setTimeout(rt);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$(t.errors)&&!f,submitCount:t.submitCount+1,errors:t.errors}),f)throw f},$t=(s,a={})=>{y(i,s)&&(A(a.defaultValue)?P(s,W(y(l,s))):(P(s,a.defaultValue),D(l,s,W(a.defaultValue))),a.keepTouched||T(t.touchedFields,s),a.keepDirty||(T(t.dirtyFields,s),t.isDirty=a.defaultValue?p(s,W(y(l,s))):p()),a.keepError||(T(t.errors,s),x.isValid&&B()),m.state.next({...t}))},at=(s,a={})=>{const o=s?W(s):l,f=W(o),d=$(s),c=d?l:f;if(a.keepDefaultValues||(l=o),!a.keepValues){if(a.keepDirtyValues)for(const g of u.mount)y(t.dirtyFields,g)?D(c,g,y(n,g)):P(g,y(c,g));else{if(Ye&&A(s))for(const g of u.mount){const V=y(i,g);if(V&&V._f){const j=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if(Ne(j)){const L=j.closest("form");if(L){L.reset();break}}}}i={}}n=e.shouldUnregister?a.keepDefaultValues?W(l):{}:W(c),m.array.next({values:{...c}}),m.values.next({values:{...c}})}u={mount:a.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!x.isValid||!!a.keepIsValid||!!a.keepDirtyValues,h.watch=!!e.shouldUnregister,m.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:d?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!ne(s,l)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:d?{}:a.keepDirtyValues?a.keepDefaultValues&&n?De(l,n):t.dirtyFields:a.keepDefaultValues&&s?De(l,s):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},nt=(s,a)=>at(se(s)?s(n):s,a);return{control:{register:Oe,unregister:$e,getFieldState:et,handleSubmit:it,setError:tt,_executeSchema:re,_getWatch:F,_getDirty:p,_updateValid:B,_removeUnmounted:Ve,_updateFieldArray:w,_updateDisabledField:st,_getFieldArray:S,_reset:at,_resetDefaultValues:()=>se(r.defaultValues)&&r.defaultValues().then(s=>{nt(s,r.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:Mt,_subjects:m,_proxyFormState:x,_setErrors:K,get _fields(){return i},get _formValues(){return n},get _state(){return h},set _state(s){h=s},get _defaultValues(){return l},get _names(){return u},set _names(s){u=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:_e,register:Oe,handleSubmit:it,watch:Ct,setValue:P,getValues:Xe,reset:nt,resetField:$t,clearErrors:kt,unregister:$e,setError:tt,setFocus:(s,a={})=>{const o=y(i,s),f=o&&o._f;if(f){const d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),a.shouldSelect&&d.select())}},getFieldState:et}}function Qe(e={}){const r=R.useRef(),t=R.useRef(),[i,l]=R.useState({isDirty:!1,isValidating:!1,isLoading:se(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:se(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...Rs(e),formState:i});const n=r.current.control;return n._options=e,As({subject:n._subjects.state,next:h=>{Ds(h,n._proxyFormState,n._updateFormState)&&l({...n._formState})}}),R.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),R.useEffect(()=>{if(n._proxyFormState.isDirty){const h=n._getDirty();h!==i.isDirty&&n._subjects.state.next({isDirty:h})}},[n,i.isDirty]),R.useEffect(()=>{e.values&&!ne(e.values,t.current)?(n._reset(e.values,n._options.resetOptions),t.current=e.values,l(h=>({...h}))):n._resetDefaultValues()},[e.values,n]),R.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),R.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),R.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),r.current.formState=Vs(i,n),r.current}const Is=e=>/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(e),Us="_h2_1vhz3_1",Ps="_h3_1vhz3_10",Ws="_h4_1vhz3_19",Bs="_body_1vhz3_28",zs="_container_1vhz3_37",qs="_label_1vhz3_42",Hs="_input_1vhz3_54",Ys="_focus_1vhz3_54",Gs="_labelText_1vhz3_57",Zs="_star_1vhz3_71",Ks="_inputWrapper_1vhz3_75",Qs="_hasValue_1vhz3_98",Js="_inputError_1vhz3_102",X={h2:Us,h3:Ps,h4:Ws,body:Bs,container:zs,label:qs,input:Hs,focus:Ys,labelText:Gs,star:Zs,inputWrapper:Ks,hasValue:Qs,inputError:Js},xe=de.forwardRef(({type:e="text",label:r,name:t,placeholder:i="",error:l,children:n,...h},u)=>{const v=t,[b,x]=de.useState(!1),m=()=>{x(!0)},O=I=>{const E=I.target.value;x(!!E)};return _.jsx("div",{className:ct(X.container,{[X.inputError]:l==null?void 0:l.message}),children:_.jsxs("label",{className:X.label,htmlFor:v,children:[_.jsxs(Y,{styleName:"body",className:X.labelText,children:[r,_.jsx("span",{className:X.star,children:"*"})]}),_.jsxs("div",{className:X.inputWrapper,children:[n,_.jsx("input",{className:ct(X.input,{[X.focus]:b}),id:v,type:e,name:t,placeholder:i,ref:u,onFocus:m,onChange:O,...h})]})]})})}),Tt=e=>{const r=/[.,:;?!*+%\-<>@[\]{}/\\_$#]/g;return!(e.length<8||e.length>32||!/[a-z]/.test(e)||!/[A-Z]/.test(e)||!/[0-9]/.test(e)||!r.test(e)||/\W/.test(e.replaceAll(r,"")))},Je="Используйте от 8 до 32 символов: строчные и прописные латинские буквы (A-z), цифры (0-9) и спецсимволы ( . , : ; ? ! * + % - < > @ [] { } / \\ _ {} $ # )",Xs="_h2_1joim_1",er="_h3_1joim_10",tr="_h4_1joim_19",sr="_body_1joim_28",rr="_form_1joim_37",ir="_inputWrapper_1joim_42",ar="_noticeText_1joim_48",Be={h2:Xs,h3:er,h4:tr,body:sr,form:rr,inputWrapper:ir,noticeText:ar};var be=function(e){var r=e.as,t=e.errors,i=e.name,l=e.message,n=e.render,h=function(O,I){if(O==null)return{};var E,J,B={},z=Object.keys(O);for(J=0;J<z.length;J++)I.indexOf(E=z[J])>=0||(B[E]=O[E]);return B}(e,["as","errors","name","message","render"]),u=Fs(),v=y(t||u.formState.errors,i);if(!v)return null;var b=v.message,x=v.types,m=Object.assign({},h,{children:b||l});return de.isValidElement(r)?de.cloneElement(r,m):n?n({message:b||l,messages:x}):de.createElement(r||de.Fragment,m)};const nr=()=>{const{register:e,handleSubmit:r,setError:t,formState:i,getValues:l}=Qe({defaultValues:{email:""},mode:"onChange"}),n=Ce(),{isError:h}=Ut(l().email),u=()=>{const{email:v}=l();n(Pt({email:v})),n(h?Wt():Bt())};return _.jsxs("form",{className:Be.form,children:[_.jsxs("div",{className:Be.inputWrapper,children:[_.jsx(xe,{type:"email",label:"E-mail",placeholder:"",...e("email",{required:{value:!0,message:"Обязательное поле"},validate:v=>v&&!Is(v)?(t("email",{message:Je}),!1):!0}),error:i.errors.email}),_.jsx(be,{errors:i.errors,name:"email",render:({message:v})=>_.jsx(Y,{styleName:"body",className:Be.noticeText,children:v})})]}),_.jsx(He,{component:"input",type:"button",value:"Далее",status:"primary",disabled:!i.isValid,onClick:r(u)})]})},or="_h2_8af6s_1",lr="_h3_8af6s_10",cr="_h4_8af6s_19",ur="_body_8af6s_28",dr="_form_8af6s_37",fr="_inputWrapper_8af6s_42",hr="_noticeText_8af6s_48",ze={h2:or,h3:lr,h4:cr,body:ur,form:dr,inputWrapper:fr,noticeText:hr},yr=()=>{const{register:e,handleSubmit:r,setError:t,formState:i,getValues:l}=Qe({defaultValues:{password:""},mode:"onChange"}),n=Ce(),h=pe(b=>b.user.email),[u]=bt(),v=()=>{const{password:b}=l();n(zt({password:b})),u({identifier:h,password:b}),pt(),n(qe())};return _.jsxs("form",{className:ze.form,children:[_.jsxs("div",{className:ze.inputWrapper,children:[_.jsx(xe,{type:"password",label:"Пароль",placeholder:"",...e("password",{required:{value:!0,message:"Обязательное поле"},validate:b=>b&&!Tt(b)?(t("password",{message:Je}),!1):!0}),error:i.errors.password}),_.jsx(be,{errors:i.errors,name:"password",render:({message:b})=>_.jsx(Y,{styleName:"body",className:ze.noticeText,children:b})})]}),_.jsx(He,{component:"input",type:"button",value:"Войти",status:"primary",disabled:!i.isValid,onClick:r(v)})]})},_r="_h2_13r6r_1",mr="_h3_13r6r_10",gr="_h4_13r6r_19",vr="_body_13r6r_28",xr="_form_13r6r_37",br="_widthLimitation_13r6r_43",pr="_inputWrapper_13r6r_49",wr="_noticeText_13r6r_55",ee={h2:_r,h3:mr,h4:gr,body:vr,form:xr,widthLimitation:br,inputWrapper:pr,noticeText:wr},Fr=()=>{const{register:e,handleSubmit:r,setError:t,formState:i,getValues:l,watch:n}=Qe({defaultValues:{firstName:"",password:"",repeatPassword:""},mode:"onChange"}),h=Ce(),u=pe(m=>m.user.email),[v]=qt(),[b]=bt(),x=()=>{const{firstName:m,password:O}=l();v({username:m,email:u,password:O}),b({identifier:u,password:O}),pt(),h(qe())};return _.jsx("form",{className:ee.form,children:_.jsxs("div",{className:ee.widthLimitation,children:[_.jsxs("div",{className:ee.inputWrapper,children:[_.jsx(xe,{type:"text",label:"Ваше имя",placeholder:"",...e("firstName",{required:{value:!0,message:"Обязательное поле"}}),error:i.errors.firstName}),_.jsx(be,{errors:i.errors,name:"firstName",render:({message:m})=>_.jsx(Y,{styleName:"body",className:ee.noticeText,children:m})})]}),_.jsxs("div",{className:ee.inputWrapper,children:[_.jsx(xe,{type:"password",label:"Пароль",placeholder:"",...e("password",{required:{value:!0,message:"Обязательное поле"},validate:m=>m&&!Tt(m)?(t("password",{message:Je}),!1):!0}),error:i.errors.password}),_.jsx(be,{errors:i.errors,name:"password",render:({message:m})=>_.jsx(Y,{styleName:"body",className:ee.noticeText,children:m})})]}),_.jsxs("div",{className:ee.inputWrapper,children:[_.jsx(xe,{type:"password",label:"Повторить пароль",placeholder:"",...e("repeatPassword",{required:{value:!0,message:"Обязательное поле"},validate:m=>n("password")!==m?(t("repeatPassword",{message:"Пароли не совпадают"}),!1):!0}),error:i.errors.repeatPassword}),_.jsx(be,{errors:i.errors,name:"repeatPassword",render:({message:m})=>_.jsx(Y,{styleName:"body",className:ee.noticeText,children:m})})]}),_.jsx(He,{component:"input",type:"submit",value:"Зарегистрироваться",status:"primary",disabled:!i.isValid,onClick:r(x)})]})})},Vr="_h2_m9c81_1",Dr="_h3_m9c81_10",Ar="_h4_m9c81_19",jr="_body_m9c81_28",Er="_shadow_m9c81_37",Nr="_modalContainer_m9c81_47",Sr="_button_m9c81_58",Tr="_icon_m9c81_64",Ae={h2:Vr,h3:Dr,h4:Ar,body:jr,shadow:Er,modalContainer:Nr,button:Sr,icon:Tr},xt=({width:e,closeModal:r,children:t})=>Ht.createPortal(_.jsxs(_.Fragment,{children:[_.jsx("div",{className:Ae.shadow}),_.jsxs("div",{className:Ae.modalContainer,style:{width:`${e}px`},children:[t,_.jsx("button",{className:Ae.button,onClick:r,children:_.jsx(wt,{name:"cross",className:Ae.icon})})]})]}),document.body),kr="Используйте от 8 до 32 символов: строчные и прописные латинские буквы (A-z), цифры (0-9) и спец символы ( . , : ; ? ! * + % - < > @ [ ] { } /  _ {} $ # )",Cr=()=>{const e=Ce(),r=pe(i=>i.authenticationStepper.activeStep),t=()=>{e(qe())};return _.jsxs(_.Fragment,{children:[(r==="email"||r==="password")&&_.jsx(xt,{width:600,closeModal:t,children:_.jsxs("div",{className:ae.loginContainer,children:[_.jsx(Y,{styleName:"h3",className:ae.title,children:"Вход"}),r==="email"&&_.jsx(nr,{}),r==="password"&&_.jsx(yr,{})]})}),r==="registration"&&_.jsx(xt,{width:710,closeModal:t,children:_.jsxs("div",{className:ae.registrationContainer,children:[_.jsxs("div",{className:ae.titleContainer,children:[_.jsx(Y,{styleName:"h3",className:ae.title,children:"Регистрация"}),_.jsxs("div",{className:ae.noticeTextContainer,children:[_.jsx(wt,{name:"x16-info",width:24,height:24}),_.jsx(Y,{styleName:"body",className:ae.noticeText,children:kr})]})]}),_.jsx(Fr,{})]})})]})},Ir=()=>{const e=pe(r=>r.modal.authenticationModalVisible);return _.jsxs("main",{children:[_.jsx(os,{}),e&&_.jsx(Cr,{})]})};export{Ir as default};
